<!DOCTYPE html>
<html lang="ru">
<head>

    <meta charset="UTF-8">

    <title></title>

    {# jquery #}
    <script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>

    {# bootstrap #}
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>

    {# font-awesome #}
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">

    {# autoresize #}
    <script src="https://cdn.jsdelivr.net/jquery.autosize/3.0.15/autosize.min.js"></script>

    {# maskedinput #}
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.maskedinput/1.4.1/jquery.maskedinput.min.js"></script>

    {# tooltipster #}
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tooltipster/3.3.0/js/jquery.tooltipster.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/tooltipster/3.3.0/css/tooltipster.min.css">

    {# bootstrap multiselect #}
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-multiselect/0.9.13/css/bootstrap-multiselect.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-multiselect/0.9.13/js/bootstrap-multiselect.min.js"></script>

    {# select2 #}
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.1/js/select2.full.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.1/js/i18n/ru.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.1/css/select2.min.css">
    <link rel="stylesheet" href="http://select2.github.io/select2-bootstrap-theme/css/select2-bootstrap.css">

    {# custom global js lib #}
    <script>
        jQuery.fn.extend({
            toggleText: function (a, b){
                var that = this;
                    if (that.text() != a && that.text() != b){
                        that.text(a);
                    }
                    else
                    if (that.text() == a){
                        that.text(b);
                    }
                    else
                    if (that.text() == b){
                        that.text(a);
                    }
                return this;
            }
        });
    </script>


    <style>

        /* reset */

        td, th {vertical-align:top;}

        /* base */

        html, body {height:100%;}

        body {background:#f1f1f5;}

        /* Задаём шрифты */
        body, input, textarea, button, select, .form-control, .dropdown-menu, .btn.multiselect, .input-group-addon,
        .select2-container--bootstrap .select2-selection {font-size:12px;font-family:tahoma, sans-serif;}

        /* override bootstrap */

        h1 {margin:0 0 15px;}

        .btn {vertical-align:top;}
        .btn:focus, .btn:active:focus, .btn.active:focus {outline:none;box-shadow:none;}

        .form-control {height:30px;padding:4px;}
        textarea.form-control {padding:5px 4px 6px;}

        /* Делаем возможным использовать в bootstrap tabs обычный <span> в качестве вкладки */
        .nav>li>span {position:relative;display:block;padding:10px 15px;}
        .nav-tabs>li>span {margin-right:2px;line-height:1.42857143;border:1px solid transparent;border-radius:4px 4px 0 0;}
        .nav-tabs>li.active>span, .nav-tabs>li.active>span:focus, .nav-tabs>li.active>span:hover {color:#555;background-color:#fff;border:1px solid #ddd;border-bottom-color:transparent;}

        /* Очищаем бутстраповский z-index */
        .btn-group-vertical>.btn.active, .btn-group-vertical>.btn:active, .btn-group-vertical>.btn:focus, .btn-group-vertical>.btn:hover, .btn-group>.btn.active, .btn-group>.btn:active, .btn-group>.btn:focus, .btn-group>.btn:hover,
        .input-group-btn:last-child>.btn, .input-group-btn:last-child>.btn-group,
        .input-group .form-control {z-index:0;}

        /* override bootstrap select2, чтобы по высоте он был 30px */
        .select2-container--bootstrap .select2-selection--single {height:30px;padding:6px 24px 6px 8px;}
        .select2-container--bootstrap .select2-selection--multiple {min-height:30px;}
        .select2-container--bootstrap .select2-selection--multiple .select2-search--inline .select2-search__field {height:28px;padding:0 8px;}

        /* bootstrap multiselect */
        .btn.multiselect {padding:5px 8px 6px;text-align:left;}
        .btn .caret {top:13px;position:absolute;right:3px;}
        .multiselect-container>li.multiselect-group label {padding:3px 10px 3px 10px;}

        /* multiple-select и select2 не должен прыгать */
        .select2-tag {height:30px !important;display:block;opacity:0;}
        select.multiselect-tag {height:30px;display:block;opacity:0;}

        /* Вспомогательные классы */
        .field-tip {line-height:30px;}
        .tip {color:#999;}
        .sep {color:#ccc;font-size:10px;font-style:normal;}
        .sep:after {content:'•'}

        /* global */

        .top-wrapper-placeholder {height:30px;}
        .top-wrapper    {background:#f00;width:100%;position:fixed;top:0;left:0;right:0;z-index:2;height:0;}
            .top-inner  {height:0;width:1251px;padding-left:30px;}

        .bottom-wrapper-placeholder {height:51px;}
        .bottom-wrapper {background:#f00;width:100%;position:fixed;bottom:51px;left:0;right:0;z-index:10;height:0;}
            .bottom-inner  {height:0;width:1251px;}

        .columns {min-height:100%;border-right:1px solid #ccc;width:1251px;}
            .column-menu {width:30px;background:#333;padding-bottom:51px;}
                .column-menu-group {margin:0 0 10px;}
                    .column-menu-group-title {line-height:30px;background:#333;position:relative;z-index:3;}
                    .column-menu-group-title:hover, .column-menu-group-title:hover * {background:#333;}
                    .column-menu-group-title.active, .column-menu-group-title.active * {background:#337ab7;}
                        .column-menu-group-title .fa {width:30px;height:30px;line-height:30px;text-align:center;color:#999;font-size:14px;}
                        .column-menu-group-title-text {display:none;font-size:11px;text-transform:uppercase;color:#999;width:170px;position:absolute;background:#333;}
                        .column-menu-group-title:hover .column-menu-group-title-text {display:inline !important;}

                    .column-menu-item {line-height:30px;display:block;text-decoration:none;cursor:pointer;position:relative;z-index:3;}
                    .column-menu-item:hover, .column-menu-item:hover * {background:#666;}
                    .column-menu-item.active, .column-menu-item.active * {background:#337ab7;}
                        .column-menu-item .fa {width:30px;height:30px;line-height:30px;text-align:center;color:#fff;font-size:14px;}
                        .column-menu-item-text {display:none;color:#fff;width:170px;position:absolute;}
                        .column-menu-item:hover .column-menu-item-text {display:inline !important;}

                    /* Стрелочка наверх */
                    .go-top {width:30px;display:none;height:51px;line-height:51px;background:#232323;z-index:3;border-top:1px solid #444;float:left;color:#fff;cursor:pointer;-webkit-user-select:none;}
                    .go-top:hover, .go-top:hover * {background:#111;}

                        .go-top .fa {width:30px;height:51px;line-height:51px;text-align:center;font-size:14px;}
                        .go-top:hover .fa {color:#337ab7;}

                        .go-top-text {display:none;color:#fff;}

            .column-content {background:#fff;padding:15px 15px 15px;}

        .footer-buttons {background:#f1f1f5;border-top:1px solid #ccc;border-right:1px solid #ccc;padding:10px;margin-left:30px;}
            .footer-buttons .btn-task {float:right;}

        @media (min-width:1600px) {
            .top-inner,
            .bottom-inner,
            .columns {margin:0 auto;}
        }

        @media (min-width:1440px) {
            .top-inner {width:1421px;padding-left:200px;}
            .bottom-inner {width:1421px;}
                .footer-buttons {margin-left:200px;}
            .columns {width:1421px;}
                .column-menu {width:200px;}
                    .column-menu-group-title-text {display:inline;}
                    .column-menu-item-text {display:inline;}
            .go-top {width:200px;}
                .go-top-text {display:inline;}
        }

    </style>

</head>
<body>
    <table class="columns">
        <tr>
            <td class="column-menu">

                <div class="column-menu-group">
                    <div class="column-menu-group-title"><i class="fa fa-cogs"></i><span class="column-menu-group-title-text">Администрирование</span></div>
                    <a href="#" class="column-menu-item"><i class="fa fa-gavel"></i><span class="column-menu-item-text">Редактирование прав</span></a>
                    <a href="#" class="column-menu-item"><i class="fa fa-user-md"></i><span class="column-menu-item-text">Редактирование ролей</span></a>
                    <a href="#" class="column-menu-item active"><i class="fa fa-unlock-alt"></i><span class="column-menu-item-text">Редактирование доступа</span></a>
                    <a href="#" class="column-menu-item"><i class="fa fa-sliders"></i><span class="column-menu-item-text">Управление проектами</span></a>
                    <a href="#" class="column-menu-item"><i class="fa fa-cubes"></i><span class="column-menu-item-text">Динамические сборки</span></a>
                    <a href="#" class="column-menu-item"><i class="fa fa-database"></i><span class="column-menu-item-text">Документация SQL</span></a>
                </div>

                <div class="column-menu-group">
                    <div class="column-menu-group-title"><i class="fa fa-file-text"></i><span class="column-menu-group-title-text">Контент</span></div>
                    <a href="#" class="column-menu-item"><i class="fa fa-globe"></i><span class="column-menu-item-text">Регионы</span></a>
                    <a href="#" class="column-menu-item"><i class="fa fa-institution"></i><span class="column-menu-item-text">Вузы</span></a>
                    <a href="#" class="column-menu-item"><i class="fa fa-home"></i><span class="column-menu-item-text">Школы</span></a>
                    <a href="#" class="column-menu-item"><i class="fa fa-book"></i><span class="column-menu-item-text">Предметы</span></a>
                    <a href="#" class="column-menu-item"><i class="fa fa-sitemap"></i><span class="column-menu-item-text">Разделы</span></a>
                    <a href="#" class="column-menu-item"><i class="fa fa-puzzle-piece"></i><span class="column-menu-item-text">Дополнения</span></a>
                </div>

                <div class="column-menu-group">
                    <div class="column-menu-group-title"><i class="fa fa-users"></i><span class="column-menu-group-title-text">Сотрудники</span></div>
                    <a href="#" class="column-menu-item"><i class="fa fa-users"></i><span class="column-menu-item-text">Сотрудники</span></a>
                    <a href="#" class="column-menu-item"><i class="fa fa-birthday-cake"></i><span class="column-menu-item-text">Дни рождения сотрудников</span></a>
                    <a href="#" class="column-menu-item"><i class="fa fa-black-tie"></i><span class="column-menu-item-text">Для консультантов</span></a>
                    <a href="#" class="column-menu-item"><i class="fa fa-file-excel-o"></i><span class="column-menu-item-text">Зарплата из Excel</span></a>
                </div>

                <div class="column-menu-group">
                    <div class="column-menu-group-title"><i class="fa fa-mortar-board"></i><span class="column-menu-group-title-text">Репетиторы</span></div>
                    <a href="#" class="column-menu-item"><i class="fa fa-mortar-board"></i><span class="column-menu-item-text">Репетиторы</span></a>
                    <a href="#" class="column-menu-item"><i class="fa fa-upload"></i><span class="column-menu-item-text">Загрузка паспортных данных</span></a>
                </div>

                <div class="column-menu-group">
                    <div class="column-menu-group-title"><i class="fa fa-phone"></i><span class="column-menu-group-title-text">Звонки</span></div>
                    <a href="#" class="column-menu-item"><i class="fa fa-microphone"></i><span class="column-menu-item-text">Прослушка разговоров</span></a>
                    <a href="#" class="column-menu-item"><i class="fa fa-fax"></i><span class="column-menu-item-text">Автоматические обзвоны</span></a>
                </div>

                <div class="column-menu-group">
                    <div class="column-menu-group-title"><i class="fa fa-user"></i><span class="column-menu-group-title-text">Петров константин</span></div>
                    <a href="#" class="column-menu-item"><i class="fa fa-sign-out"></i><span class="column-menu-item-text">Выйти</span></a>
                </div>

            </td>

            <td class="column-content">

                <!-- Если есть текущая задача -->
                    <div class="top-wrapper-placeholder"></div>
                <!-- Конец если -->

                <div class="top-wrapper">
                    <div class="top-inner">
                        {% include 'nb/current_task.html' %}
                    </div>
                </div>

                {% block content %}{% endblock %}

                <!-- Если мы на странице редактирования репетитора - показываем плейсхолдер для кнопки -->
                    <div class="bottom-wrapper-placeholder"></div>
                <!-- Конец если -->

                <div class="bottom-wrapper">
                    <div class="bottom-inner">
                        <div class="go-top"><i class="fa fa-chevron-up"></i><span class="go-top-text">Наверх</span></div>
                        <div class="footer-buttons">
                            <button class="btn btn-sm btn-default btn-task">Создать задачу</button>
                            <button class="btn btn-sm btn-primary">Сохранить</button>
                        </div>
                    </div>
                </div>

            </td>
        </tr>
    </table>

    <script>

        /* Кнопка "Наверх / К закладке" */
        new function GoTop() { var self = this;

            self.el = $('.go-top');
            self.window = $(window);
            self.bookmark = 0;
            self.scrolledByClick = false;

            self.arrowState = function() {
                self.el.find('.fa').addClass('fa-chevron-up').removeClass('fa-bookmark');
                self.el.find('.go-top-text').text('Наверх');
            };

            self.bookmarkState = function() {
                self.el.find('.fa').removeClass('fa-chevron-up').addClass('fa-bookmark');
                self.el.find('.go-top-text').text('К закладке');
            };

            self.init = function() {
                if (self.window.scrollTop() > 0) {
                    self.el.show();
                }
            };

            self.events = function() {

                self.el.on('click', function(e) {
                    self.scrolledByClick = true;
                    if (self.window.scrollTop() > 0) {
                        self.bookmark = self.window.scrollTop();
                        self.window.scrollTop(0);
                        self.bookmarkState();
                    } else {
                        self.window.scrollTop(self.bookmark);
                        self.arrowState();
                    }
                    e.preventDefault();
                });

                self.window.scroll(function() {
                    self.el.show();
                    if (!self.scrolledByClick) {
                        self.arrowState();
                        if (self.window.scrollTop() == 0) {
                            self.el.hide();
                        }
                    }
                    self.scrolledByClick = false;
                });
            };

            self.init();
            self.events();

        };

        /* Скрываем левую колонку */
        $('.column-menu-toggle').on('click', function() {
            var $body = $('body');
            $body.toggleClass('menu-collapsed');
            if ($body.hasClass('menu-collapsed')) {
                // Пишем в сессию о том, что у данного пользователя колонка свёрнута
            } else {
                // Пишем в сессию о том, что у данного пользователя колонка раскрыта
            }
        });

        /* Скресчиваем и вызываем select2 для обычного селекта с поиском */
        $('.select-search').select2({
            theme: 'bootstrap',
            language: 'ru'
        }).on('select2:unselect', function(e) {
            /* Не показываем окно с опциями при удалении тега */
            if (!e.params.originalEvent) return;
            e.params.originalEvent.stopPropagation();
        });

        /* Вызываем multiple select2 */
        $('.select2-tag').select2({
            theme: 'bootstrap',
            language: 'ru',
            closeOnSelect: false
        }).on('select2:unselect', function(e) {
            /* Не показываем окно с опциями при удалении тега */
            if (!e.params.originalEvent) return;
            e.params.originalEvent.stopPropagation();
        });

        /* Текстарея должна автоматически ресайзиться под текст */
        autosize($('textarea'));

        /* Крутые всплывающие подсказки */
        $('[title]').tooltipster({delay:50});

    </script>

</body>
</html>