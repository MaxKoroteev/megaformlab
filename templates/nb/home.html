<!DOCTYPE html>
<html lang="ru">
<head>

    <meta charset="UTF-8">

    <title></title>

    {# jquery #}
    <script src="https://code.jquery.com/jquery-2.2.1.min.js"></script>

    {# bootstrap #}
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>

    {# font-awesome #}
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">

    {# autoresize #}
    <script src="https://cdn.jsdelivr.net/jquery.autosize/3.0.15/autosize.min.js"></script>

    {# maskedinput #}
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.maskedinput/1.4.1/jquery.maskedinput.min.js"></script>

    {# tooltipster #}
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tooltipster/3.3.0/js/jquery.tooltipster.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/tooltipster/3.3.0/css/tooltipster.min.css">

    {# bootstrap multiselect #}
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-multiselect/0.9.13/css/bootstrap-multiselect.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-multiselect/0.9.13/js/bootstrap-multiselect.min.js"></script>

    {# bootstrap datepicker https://github.com/eternicode/bootstrap-datepicker #}
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.6.0/css/bootstrap-datepicker.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.6.0/js/bootstrap-datepicker.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.6.0/locales/bootstrap-datepicker.ru.min.js"></script>

    {# select2 #}
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.1/js/select2.full.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.1/js/i18n/ru.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.1/css/select2.min.css">
    <link rel="stylesheet" href="http://select2.github.io/select2-bootstrap-theme/css/select2-bootstrap.css">

    {# custom global js lib #}
    <script>
        jQuery.fn.extend({
            toggleText: function (a, b){
                var that = this;
                    if (that.text() != a && that.text() != b){
                        that.text(a);
                    }
                    else
                    if (that.text() == a){
                        that.text(b);
                    }
                    else
                    if (that.text() == b){
                        that.text(a);
                    }
                return this;
            }
        });
    </script>


    <style>

        /* reset */

        td, th {vertical-align:top;}

        /* base */

        html, body {height:100%;}

        body {background:#f1f1f5;}

        /* Задаём шрифты */
        body, input, textarea, button, select, .form-control, .dropdown-menu, .btn.multiselect, .input-group-addon,
        .select2-container--bootstrap .select2-selection {font-size:12px;font-family:tahoma, sans-serif;}

        /* Мальца перекрываем bootstrap */

        h1 {margin:0 0 15px;}

        .btn {vertical-align:top;}
        .btn:focus, .btn:active:focus, .btn.active:focus {outline:none;box-shadow:none;}

        .form-control {height:30px;padding:4px;}
        textarea.form-control {padding:5px 4px 6px;resize:vertical;}

        a:focus {color:#337ab7;text-decoration:none;}
        a:focus:hover {color:#23527c;text-decoration:underline;}

        /* Мальца дополняем bootstrap */

        .form-control-half {width:50% !important;} /* Вспомогательный класс, чтобы делать инпут наполовину короче */

        /* Делаем возможным использовать в bootstrap tabs обычный <span> в качестве вкладки */

        .nav>li>span {position:relative;display:block;padding:10px 15px;}
        .nav-tabs>li>span {margin-right:2px;line-height:1.42857143;border:1px solid transparent;border-radius:4px 4px 0 0;}
        .nav-tabs>li.active>span, .nav-tabs>li.active>span:focus, .nav-tabs>li.active>span:hover {color:#555;background-color:#fff;border:1px solid #ddd;border-bottom-color:transparent;}

        /* Очищаем бутстраповский z-index */

        .btn-group-vertical>.btn.active, .btn-group-vertical>.btn:active, .btn-group-vertical>.btn:focus, .btn-group-vertical>.btn:hover, .btn-group>.btn.active, .btn-group>.btn:active, .btn-group>.btn:focus, .btn-group>.btn:hover,
        .input-group-btn:last-child>.btn, .input-group-btn:last-child>.btn-group,
        .input-group .form-control {z-index:0;}

        /* Перекрываем bootstrap select2, чтобы по высоте он был 30px */

        .select2-container--bootstrap .select2-selection--single {height:30px;padding:6px 24px 6px 8px;}
        .select2-container--bootstrap .select2-selection--multiple {min-height:30px;}
        .select2-container--bootstrap .select2-selection--multiple .select2-search--inline .select2-search__field {height:28px;padding:0 8px;}

        /* bootstrap multiselect */

        .btn.multiselect {padding:5px 8px 6px;text-align:left;}
        .btn .caret {top:13px;position:absolute;right:3px;}
        .multiselect-container>li.multiselect-group label {padding:3px 10px 3px 10px;}

        /* select2-search и select2-tag не должен прыгать */

        .select2-tag {height:30px !important;display:block;opacity:0;}
        select.multiselect-tag {height:30px;display:block;opacity:0;}

        /* Вспомогательные классы */

        .field-tip {line-height:30px;}
        .tip {color:#999;}
        .sep {color:#ccc;font-size:10px;line-height:10px;font-style:normal;}
        .sep:after {content:'•'}

        /* Фильтр. Используется в списке репетиторов, в списке задач, может ещё где будет */
        .filter {width:200px;padding-right:15px;border-right:1px solid #ccc;}
            .filter-subject-block {padding:5px;border:1px solid #ccc;border-radius:2px;margin:10px 0;position:relative;}
                .filter-subject-close {display:inline-block;border-radius:2px;position:absolute;top:-7px;right:-7px;background:#337ab7;color:#fff;width:15px;height:15px;line-height:15px;text-align:center;cursor:pointer;}
                .filter-subject-close:hover {background:#286090;}
            .btn-add-subject {margin-bottom:10px;}
            .filter-block {margin-bottom:5px;position:relative;}
                .filter-block label {font-weight:normal;margin:0 5px 0 0;}
                .filter-title {font-weight:bold;line-height:18px;}
                .filter-title-collapse {background:#f9f9fa;font-weight:bold;padding:5px 5px;border:1px solid #ccc;border-radius:2px 2px 0 0;cursor:pointer;}
                .filter-title-collapse:hover {background:#f1f1f5;}
                .filter-content {padding:3px 5px;border:1px solid #ccc;border-top:0;border-radius:0 0 2px 2px;}
                    .filter-content .filter-title {margin-top:5px;}
                        .filter-title .fa {float:right;margin-top:3px;}
                .filter-content {display:none;}
                .filter-block.active .filter-content {display:block;}
                .filter-range {}
                    .filter-range td, .filter-range th {line-height:30px;}

            .filter-float-submit {position:absolute;top:50%;margin-top:-6px;left:100%;background:#337ab7;margin-left:15px;display:none;border-radius:0 2px 2px 0;z-index:2;box-shadow:1px 1px 1px rgba(0,0,0,0.25);}
            .filter-float-submit:before {width:0;height:0;border-top:15px solid transparent;border-bottom:15px solid transparent;border-right:10px solid #337ab7;content:'';position:absolute;top:0;left:-10px;}
            .filter-float-submit:hover:before {border-right-color:#286090;}

                .filter-float-submit .btn {border:0;height:30px;background:#337ab7;color:#fff;}
                .filter-float-submit:hover .btn {background:#286090;}

                .filter-float-submit .fa {position:absolute;background:#333;color:#fff;top:-8px;right:-8px;height:15px;line-height:15px;width:15px;text-align:center;display:block;border-radius:10px;font-size:11px;cursor:pointer;}
                .filter-float-submit .fa:hover {background:#d9534f;}

            .btn-filter-submit {margin-top:10px;}

        /* Глобальное */

        .top-wrapper-placeholder {height:31px;}
        .top-wrapper    {width:100%;position:fixed;top:0;left:0;right:0;z-index:2;height:0;}
            .top-inner  {height:0;width:1251px;padding-left:30px;}

        .bottom-wrapper-placeholder {height:51px;}
        .bottom-wrapper {width:100%;position:fixed;bottom:51px;left:0;right:0;z-index:10;height:0;}
            .bottom-inner  {height:0;width:1251px;}

        .columns {min-height:100%;border-right:1px solid #ccc;width:1251px;}
            .column-menu {width:30px;background:#333;padding-bottom:51px;}
                .column-menu-group {margin:0 0 10px;}
                .column-menu-group-user {border-top:1px solid #555;padding-top:10px;}
                    .column-menu-group-title {line-height:30px;height:30px;background:#333;position:relative;z-index:3;}
                    .column-menu-group-title:hover, .column-menu-group-title:hover * {background:#333;}
                    .column-menu-group-title.active, .column-menu-group-title.active * {background:#337ab7;}
                        .column-menu-group-title .fa {width:30px;height:30px;line-height:30px;text-align:center;color:#999;font-size:14px;}
                        .column-menu-group-title-text {display:none;font-size:11px;text-transform:uppercase;color:#999;width:170px;position:absolute;background:#333;}
                        .column-menu-group-title:hover .column-menu-group-title-text {display:inline !important;}

                    .column-menu-item {line-height:30px;height:30px;display:block;text-decoration:none;cursor:pointer;position:relative;z-index:3;}
                    .column-menu-item:hover, .column-menu-item:hover * {background:#666;}
                    .column-menu-item.active, .column-menu-item.active * {background:#337ab7;}
                        .column-menu-item .fa {width:30px;height:30px;line-height:30px;text-align:center;color:#fff;font-size:14px;}
                        .column-menu-item-text {display:none;color:#fff;width:170px;position:absolute;}
                        .column-menu-item:hover .column-menu-item-text {display:inline !important;}

                    .wide-toggle {float:right;position:relative;z-index:1;margin-right:10px;text-transform:none;}

                    /* Стрелочка наверх */
                    .go-top {width:30px;display:none;height:51px;line-height:51px;background:#232323;z-index:3;border-top:1px solid #444;float:left;color:#fff;cursor:pointer;-webkit-user-select:none;}
                    .go-top:hover, .go-top:hover * {background:#111;}

                        .go-top .fa {width:30px;height:51px;line-height:51px;text-align:center;font-size:14px;}
                        .go-top:hover .fa {color:#337ab7;}

                        .go-top-text {display:none;color:#fff;}

            .column-content {background:#fff;padding:15px 15px 15px;}

        .footer-buttons {background:#f1f1f5;border-top:1px solid #ccc;border-right:1px solid #ccc;padding:10px;margin-left:30px;}
            .footer-buttons .btn-task {float:right;}

        @media (min-width:1600px) {
            .top-inner,
            .bottom-inner,
            .columns {margin:0 auto;}
        }

        @media (min-width:1440px) {
            .top-inner {width:1421px;padding-left:200px;}
            .bottom-inner {width:1421px;}
                .footer-buttons {margin-left:200px;}
            .columns {width:1421px;}
                .column-menu {width:200px;}
                    .column-menu-group-title-text {display:inline;}
                    .column-menu-item-text {display:inline;}
            .go-top {width:200px;}
                .go-top-text {display:inline;}
        }

        body.wide .columns {border-right:0;width:100%;}

        body.wide .top-inner {width:100%;}
            body.wide .current-task {border-right:0;}

        body.wide .bottom-inner {width:100%;}
            body.wide .footer-buttons {border-right:0;}

        [data-icon="Администрирование"]      .fa:before {content:'\f085';}
        [data-icon="Редактирование прав"]    .fa:before {content:'\f0e3';}
        [data-icon="Редактирование ролей"]   .fa:before {content:'\f0f0';}
        [data-icon="Редактирование доступа"] .fa:before {content:'\f13e';}
        [data-icon="Управление проектами"]   .fa:before {content:'\f1de';}
        [data-icon="Динамические сборки"]    .fa:before {content:'\f1b3';}
        [data-icon="Документация SQL"]       .fa:before {content:'\f1c0';}

        [data-icon="Контент"]    .fa:before {content:'\f15c';}
        [data-icon="Регионы"]    .fa:before {content:'\f0ac';}
        [data-icon="Вузы"]       .fa:before {content:'\f19c';}
        [data-icon="Школы"]      .fa:before {content:'\f015';}
        [data-icon="Предметы"]   .fa:before {content:'\f02d';}
        [data-icon="Разделы"]    .fa:before {content:'\f0e8';}
        [data-icon="Дополнения"] .fa:before {content:'\f12e';}

        [data-icon="Сотрудники"]               .fa:before {content:'\f0c0';}
        [data-icon="Сотрудники"]               .fa:before {content:'\f0c0';}
        [data-icon="Дни рождения сотрудников"] .fa:before {content:'\f1fd';}
        [data-icon="Для консультантов"]        .fa:before {content:'\f27e';}
        [data-icon="Зарплата из Excel"]        .fa:before {content:'\f1c3';}

        [data-icon="Репетиторы"]                 .fa:before {content:'\f19d';}
        [data-icon="Репетиторы"]                 .fa:before {content:'\f19d';}
        [data-icon="Загрузка паспортных данных"] .fa:before {content:'\f093';}

        [data-icon="Звонки"]                 .fa:before {content:'\f19d';}
        [data-icon="Прослушка разговоров"]   .fa:before {content:'\f19d';}
        [data-icon="Автоматические обзвоны"] .fa:before {content:'\f093';}

    </style>

</head>
<body>
    <table class="columns">
        <tr>
            <td class="column-menu">

                <div class="column-menu-group">
                    <a href="{% url 'tasks' %}" class="column-menu-item{% active 'tasks' %}"><i class="fa fa-tasks"></i><span class="column-menu-item-text">Задачи</span></a>
                </div>

                <div class="column-menu-group">
                    <div class="column-menu-group-title" data-icon="Администрирование"><i class="fa"><!-- fa-cogs --></i><span class="column-menu-group-title-text">Администрирование</span></div>
                    <a href="#" class="column-menu-item" data-icon="Редактирование прав"><i class="fa fa-gavel"></i><span class="column-menu-item-text">Редактирование прав</span></a>
                    <a href="#" class="column-menu-item" data-icon="Редактирование ролей"><i class="fa fa-user-md"></i><span class="column-menu-item-text">Редактирование ролей</span></a>
                    <a href="#" class="column-menu-item" data-icon="Редактирование доступа"><i class="fa fa-unlock-alt"></i><span class="column-menu-item-text">Редактирование доступа</span></a>
                    <a href="#" class="column-menu-item" data-icon="Управление проектами"><i class="fa fa-sliders"></i><span class="column-menu-item-text">Управление проектами</span></a>
                    <a href="#" class="column-menu-item" data-icon="Динамические сборки"><i class="fa fa-cubes"></i><span class="column-menu-item-text">Динамические сборки</span></a>
                    <a href="#" class="column-menu-item" data-icon="Документация SQL"><i class="fa fa-database"></i><span class="column-menu-item-text">Документация SQL</span></a>
                </div>

                <div class="column-menu-group">
                    <div class="column-menu-group-title" data-icon="Контент"><i class="fa fa-file-text"></i><span class="column-menu-group-title-text">Контент</span></div>
                    <a href="#" class="column-menu-item" data-icon="Регионы"><i class="fa fa-globe"></i><span class="column-menu-item-text">Регионы</span></a>
                    <a href="#" class="column-menu-item" data-icon="Вузы"><i class="fa fa-institution"></i><span class="column-menu-item-text">Вузы</span></a>
                    <a href="#" class="column-menu-item" data-icon="Школы"><i class="fa fa-home"></i><span class="column-menu-item-text">Школы</span></a>
                    <a href="#" class="column-menu-item" data-icon="Предметы"><i class="fa fa-book"></i><span class="column-menu-item-text">Предметы</span></a>
                    <a href="#" class="column-menu-item" data-icon="Разделы"><i class="fa fa-sitemap"></i><span class="column-menu-item-text">Разделы</span></a>
                    <a href="#" class="column-menu-item" data-icon="Дополнения"><i class="fa fa-puzzle-piece"></i><span class="column-menu-item-text">Дополнения</span></a>
                </div>

                <div class="column-menu-group">
                    <div class="column-menu-group-title" data-icon="Сотрудники"><i class="fa fa-users"></i><span class="column-menu-group-title-text">Сотрудники</span></div>
                    <a href="#" class="column-menu-item" data-icon="Сотрудники"><i class="fa fa-users"></i><span class="column-menu-item-text">Сотрудники</span></a>
                    <a href="#" class="column-menu-item" data-icon="Дни рождения сотрудников"><i class="fa fa-birthday-cake"></i><span class="column-menu-item-text">Дни рождения сотрудников</span></a>
                    <a href="#" class="column-menu-item" data-icon="Для консультантов"><i class="fa fa-black-tie"></i><span class="column-menu-item-text">Для консультантов</span></a>
                    <a href="#" class="column-menu-item" data-icon="Зарплата из Excel"><i class="fa fa-file-excel-o"></i><span class="column-menu-item-text">Зарплата из Excel</span></a>
                </div>

                <div class="column-menu-group">
                    <div class="column-menu-group-title" data-icon="Репетиторы"><i class="fa fa-mortar-board"></i><span class="column-menu-group-title-text">Репетиторы</span></div>
                    <a href="{% url 'teachers' %}" class="column-menu-item{% active 'teachers' %}" data-icon="Репетиторы"><i class="fa fa-mortar-board"></i><span class="column-menu-item-text">Репетиторы</span></a>
                    <a href="#" class="column-menu-item"><i class="fa fa-upload" data-icon="Загрузка паспортных данных"></i><span class="column-menu-item-text">Загрузка паспортных данных</span></a>
                </div>

                <div class="column-menu-group">
                    <div class="column-menu-group-title" data-icon="Звонки"><i class="fa fa-phone"></i><span class="column-menu-group-title-text">Звонки</span></div>
                    <a href="#" class="column-menu-item" data-icon="Прослушка разговоров"><i class="fa fa-microphone"></i><span class="column-menu-item-text">Прослушка разговоров</span></a>
                    <a href="#" class="column-menu-item" data-icon="Автоматические обзвоны"><i class="fa fa-fax"></i><span class="column-menu-item-text">Автоматические обзвоны</span></a>
                </div>

                <div class="column-menu-group column-menu-group-user">
                    <div class="column-menu-group-title"><i class="fa fa-user"></i><span class="column-menu-group-title-text"><a href="#" class="wide-toggle">100%</a> Петров К.В.</span></div>
                    <a href="#" class="column-menu-item"><i class="fa fa-sign-out"></i><span class="column-menu-item-text">Выйти</span></a>
                </div>

                <div class="column-menu-group">
                    <div class="column-menu-group-title"><i class="fa fa-file-text-o"></i><span class="column-menu-group-title-text">Документация прототипа</span></div>
                    <a href="{% url 'layout' %}" class="column-menu-item{% active 'layout' %}"><i class="fa fa-th-large"></i><span class="column-menu-item-text">Layout</span></a>
                </div>

            </td>

            <td class="column-content">

                <!-- Если есть текущая задача -->
                    <div class="top-wrapper-placeholder"></div>
                <!-- Конец если -->

                <div class="top-wrapper">
                    <div class="top-inner">
                        {% include 'nb/current_task.html' %}
                    </div>
                </div>

                {% block content %}

                    <h1>Правила layout-а</h1>

                    <table class="table" style="width:auto;">
                        <tr>
                            <th>Ширина окна браузера</th>
                            <th>Ширина сайта</th>
                            <th>Ширина контент блока</th>
                            <th>Ориентация</th>
                            <th>Левое меню</th>
                            <th>Горизонтальный скролл</th>
                        </tr>
                        <tr>
                            <th>от 1600px</th>
                            <td>1420</td>
                            <td>1220</td>
                            <td>По центру</td>
                            <td>Развёрнуто</td>
                            <td>Нет</td>
                        </tr>
                        <tr>
                            <th>1440px до 1600px</th>
                            <td>1420</td>
                            <td>1220</td>
                            <td>К левому краю</td>
                            <td>Развёрнуто</td>
                            <td>Нет</td>
                        </tr>
                        <tr>
                            <th>1280px до 1440px</th>
                            <td>1250</td>
                            <td>1220</td>
                            <td>К левому краю</td>
                            <td>Свёрнуто</td>
                            <td>Нет</td>
                        </tr>
                        <tr>
                            <th>до 1280px</th>
                            <td>1250</td>
                            <td>1220</td>
                            <td>К левому краю</td>
                            <td>Свёрнуто</td>
                            <td>Да</td>
                        </tr>
                    </table>


                    <div class="alert alert-info">
                        <ul style="padding-left:20px;">
                            <li>Справа от имени пользователя доступна кнопочка - <b>100% | Fixed</b> - которая растягивает сайт на весь экран, не отменяя поведения, описанного выше.</li>
                            <li>За качество отображения на 100% ширине - никто не отвечает. Нужно для специфических страниц и специфических пользователей, типа Динамических сборок для Андрюхи и Митяя.</li>
                            <li>Данные этой кнопочки храняться в localStorage</li>
                        </ul>
                    </div>

                    <h2>Опрос сотрудников, на предмет разрешения экрана</h2>

                    <table class="table">
                        <tr>
                            <th>Результат опроса</th>
                            <td><a href="https://docs.google.com/spreadsheets/d/1866Ch9YW0BS0EvHVBRCXJ4EKWL3hK49-bLZA91XKJmg/edit#gid=0">https://docs.google.com/spreadsheets/d/1866Ch9YW0BS0EvHVBRCXJ4EKWL3hK49-bLZA91XKJmg/edit#gid=0</a></td>
                        </tr>
                        <tr>
                            <th>Использовался сервис</th>
                            <td><a href="http://www.whatismyscreenresolution.com/">http://www.whatismyscreenresolution.com/</a></td>
                        </tr>
                    </table>

                {% endblock %}

                <!-- Если мы на странице редактирования репетитора - показываем плейсхолдер для кнопки -->
                {% if url_name == 'teacher' %}
                    <div class="bottom-wrapper-placeholder"></div>
                {% endif %}
                <!-- Конец если -->

                <div class="bottom-wrapper">
                    <div class="bottom-inner">
                        <div class="go-top"><i class="fa fa-chevron-up"></i><span class="go-top-text">Наверх</span></div>

                        <!-- Если мы на странице редактирования репетитора - показываем плейсхолдер для кнопки -->
                        {% if url_name == 'teacher' %}
                            <div class="footer-buttons">
                                <button class="btn btn-sm btn-default btn-task">Создать задачу</button>
                                <button class="btn btn-sm btn-primary">Сохранить</button>
                            </div>
                        {% endif %}
                        <!-- Конец если -->
                    </div>
                </div>

            </td>
        </tr>
    </table>

    <script>

        /* Бутстраповский dropdown не должен закрываться по click inside */
        $('.dropdown-menu').on('click', function() {return false;});

        /* Скресчиваем и вызываем select2 для обычного селекта с поиском */
        $('.select2-search').select2({
            theme: 'bootstrap',
            language: 'ru'
        }).on('select2:unselect', function(e) {
            /* Не показываем окно с опциями при удалении тега */
            if (!e.params.originalEvent) return;
            e.params.originalEvent.stopPropagation();
        });
        
        /* Вызываем multiple select2 */
        $('.select2-tag').select2({
            theme: 'bootstrap',
            language: 'ru',
            closeOnSelect: false
        }).on('select2:unselect', function(e) {
            /* Не показываем окно с опциями при удалении тега */
            if (!e.params.originalEvent) return;
            e.params.originalEvent.stopPropagation();
        });

        /* Текстарея должна автоматически ресайзиться под текст */
        autosize($('textarea'));

        /* Крутые всплывающие подсказки */
        $('[title]').tooltipster({delay:50});

        $('.datepicker-tag').datepicker({
            weekStart: 1,
            format: 'dd.mm.yyyy',
            todayBtn: 'linked',
            language: 'ru',
            todayHighlight: true,
            orientation: 'bottom'
        });

        /* Кнопка "Наверх / К закладке" */
        new function GoTop() { var self = this;

            self.el = $('.go-top');
            self.window = $(window);
            self.bookmark = 0;
            self.scrolledByClick = false;

            self.arrowState = function() {
                self.el.find('.fa').addClass('fa-chevron-up').removeClass('fa-bookmark');
                self.el.find('.go-top-text').text('Наверх');
            };

            self.bookmarkState = function() {
                self.el.find('.fa').removeClass('fa-chevron-up').addClass('fa-bookmark');
                self.el.find('.go-top-text').text('К закладке');
            };

            self.init = function() {
                if (self.window.scrollTop() > 0) {
                    self.el.show();
                }
            };

            self.events = function() {

                self.el.on('click', function(e) {
                    self.scrolledByClick = true;
                    if (self.window.scrollTop() > 0) {
                        self.bookmark = self.window.scrollTop();
                        self.window.scrollTop(0);
                        self.bookmarkState();
                    } else {
                        self.window.scrollTop(self.bookmark);
                        self.arrowState();
                    }
                    e.preventDefault();
                });

                self.window.scroll(function() {
                    self.el.show();
                    if (!self.scrolledByClick) {
                        self.arrowState();
                        if (self.window.scrollTop() == 0) {
                            self.el.hide();
                        }
                    }
                    self.scrolledByClick = false;
                });
            };

            self.init();
            self.events();

        };

        new function Filter() { var self = this;

            self.floatSubmit = $('.filter-float-submit');
            self.floatSubmitClose = self.floatSubmit.find('.fa-times');
            self.titles = $('.filter-title');

            self.events = function() {

                /* Скрываемые блочки в фильтре */
                self.titles.on('click', function() {
                    var $this = $(this);
                    $(this).closest('.filter-block').toggleClass('active');
                    $(this).find('.fa').toggleClass('fa-chevron-down').toggleClass('fa-chevron-up');
                });

                /* У фильтра должна появляться кнопка субмита */
                $('.filter input, .filter select').on('change keyup', function() {
                    $(this).closest('.filter-block').prepend(self.floatSubmit.show());
                });

                self.floatSubmitClose.on('click', function() {
                    self.floatSubmit.hide();
                });

            };

            self.events();

        };

        new function WideButton() { var self = this;

            self.body = $('body');
            self.button = $('.wide-toggle');
            self.isWide = $.parseJSON(localStorage.getItem('wide'));

            self.init = function() {
                if (self.isWide) {
                    self.makeWide();
                } else {
                    self.makeNarrow();
                }
            };

            self.makeWide = function() {
                self.body.addClass('wide');
                self.button.text('Fixed');
                localStorage.setItem('wide', true);
                self.isWide = true
            };

            self.makeNarrow = function() {
                self.body.removeClass('wide');
                self.button.text('100%');
                localStorage.setItem('wide', false);
                self.isWide = false
            };

            self.events = function() {
                self.button.on('click', function() {
                    if (self.isWide) {
                        self.makeNarrow();
                    } else {
                        self.makeWide();
                    }
                    return false;
                });
            };

            self.init();
            self.events();

        };

    </script>

</body>
</html>